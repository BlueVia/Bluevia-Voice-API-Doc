<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Language" content="en-us">
<meta http-equiv="imagetoolbar" content="false">
<meta name="MSSmartTagsPreventParsing" content="true">
<title></title>
<link href="../../../css/bootstrap.min.css" rel="stylesheet" media="screen">
<link href="../../../css/bluevia_style.css" rel="stylesheet" media="screen">
</head>
<body class="api" data-spy="scroll" data-target=".sidemenu">
  <script src="http://code.jquery.com/jquery-latest.js"></script><script src="../../../js/bootstrap.min.js"></script><div id="header-wrapper" class="page-header">
    <div id="header" class="container-fluid">
      <div class="row-fluid">
        <a class="logo offset1" href="../../../">
          <img src="http://bluevia.com/img/BlueVia-Hdr-Logo-SML.png" width="100" alt="Bluevia Logo"><span class="lightblue"></span>
        </a>

      </div>
    </div>
    <!-- #header --> </div>
  <!-- #header-wrapper -->

  <div class="container-fluid">
    <div class="row-fluid">
      <div class="content span8 offset1">

        <ul class="breadcrumb">
<li>
<a href="../../../">Home</a> <span class="divider">/</span>
</li>
          <li class="active">
        </ul>
<h1 id="providing-call-control-commands-to-bluevia">Providing Call Control Commands To BlueVia</h1>

<p>There are two format that you can specify call control commands to BlueVia - JSON or XML</p>

<h2 id="json">JSON</h2>

<p>JSON commands are provided to BlueVia within a commands array. This is necessary as the order of commands is important to BlueVia. Consequently it is not possible to simply directly translate a set of XML Commands into a set of JSON commands. This is as order is not guaranteed in this translation.</p>

<p>An example of JSON commands provided to BlueVia, within a commands array follows:</p>

<pre><code>{
	"commands": [
		{
			"getDigits": {
				"timeout": 5,
				"numberOfDigits": 1,
				"retries": 2,
				"actionUrl": "http://a.domain.com/handlegetDigitsrequest",
				"speak": {
					"text": "Press 1 to create a new conference. Press 2 to join an existing conference call.",
					"voice": "Female"
				}
			}
		},
		{
			"speak": {
				"text": "Sorry, you didn't enter a selection in time. Please call and try again.",
				"voice": "Female"
			}
		}
	]
}
</code></pre>

<h2 id="xml">XML</h2>

<p>XML  responses require you to provide the correct namespacing such that you canvalidate your XML against the <a href="http://api.bluevia.com/schemas/comms/v1%20api.bluevia.com_comms_v1_0.xsd">BlueVia Voice API XSD</a>. The same JSON example above can be seen in XML below. </p>

<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;tns:modifyCall xmlns:tns="http://api.bluevia.com/schemas/comms/v1" xmlns:tns1="http://api.bluevia.com/schemas/common/v2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://api.bluevia.com/schemas/comms/v1 api.bluevia.com_comms_v1_0.xsd "&gt;
  &lt;tns:commands&gt;
    &lt;tns:getDigits&gt;
    	&lt;tns:timeout&gt;5&lt;/tns:timeout&gt;
    	&lt;tns:numberOfDigits&gt;1&lt;/tns:numberOfDigits&gt;
    	&lt;tns:retries&gt;2&lt;/tns:retries&gt;
    	&lt;tns:actionUrl&gt;http://a.domain.com/handlegetDigitsrequest&lt;/tns:actionUrl&gt;
    	&lt;tns:speak&gt;
    		&lt;tns:text&gt;Press 1 to create a new conference call. Press 2 to join an existing conference call&lt;/tns:text&gt;
    		&lt;tns:voice&gt;Female&lt;/tns:voice&gt;
    	&lt;/tns:speak&gt;    	
    &lt;/tns:getDigits&gt;
    &lt;tns:speak&gt;
    	&lt;tns:text&gt;Sorry, you didn't enter a selection in time. Please call and try again.&lt;/tns:text&gt;
    	&lt;tns:voice&gt;Female&lt;/tns:voice&gt;
    &lt;/tns:speak&gt;
    &lt;tns:hangup/&gt;
  &lt;/tns:commands&gt;
&lt;/tns:modifyCall&gt;
</code></pre>

<p><strong>NOTE</strong>: As you can see from the above examples, you can specify more than a single command at once to BlueVia. Refer to <a href="../commandchains/">BlueVia Voice Command Chains</a> for further detail</p>

<!-- Bluevia  -->

<!-- Overview -->

<!-- Quick start -->

<!-- Restref -->

<!-- Command ref -->

<!-- Notifications -->

<!-- Error codes  -->

<!-- Roadmap -->

<!-- Play -->

<!-- Known Issues -->

        <hr>
<span id="prevPage" class="bottomLinks pull-left"></span>
        <span id="nextPage" class="bottomLinks pull-right"></span>

      </div>

      <div id="sidebar" class="span3">
        <div class="accordion" id="accordionMenu">
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionOverview" href="#collapseOverview"><i class="icon-chevron-down"></i></a><a href="../../overview/">Overview</a>
            </div>
          <div id="collapseOverview" class="accordion-body collapse">
            <div class="accordion-inner">
              <ul class="js-guides nav nav-list sidemenu">
<li>
                  <a href="../../overview/restapi/">BlueVia Voice RESTful API</a>
                </li>
                <li>
                  <a href="../../overview/callcontrol/">BlueVia Voice Call Control Commands</a>
                </li>
                <li>
                  <a href="../../overview/callflows/">Call Flows</a>
                </li>
                <li>
                  <a href="../../overview/existing/">Existing BlueVia APIs and the BlueVia Voice API</a>
                </li>
                <li>
                  <a href="../../overview/balance/">Adding Balance To Your BlueVia Account</a>
                </li>
                <li>
                  <a href="../../overview/numbers/">Buying Numbers</a>
                </li>
                <li>
                  <a href="../../overview/configure/">Configuring Your BlueVia Numbers</a>
                </li>
                <li>
                  <a href="../../overview/usingnumbers/">Using Your BlueVia Voice Numbers</a>
                </li>
                <li>
                  <a href="../../overview/pricing/">BlueVia Voice API Costs</a>
                </li>
                <li>
                  <a href="../../overview/knownlimitations/">Known Alpha Limitations</a>
                </li>
              </ul>
</div>
          </div>

          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionQuickstart" href="#collapseQuickstart"><i class="icon-chevron-down"></i></a><a href="../../quickstart/">Quick Start Guides</a>
            </div>
          <div id="collapseQuickstart" class="accordion-body collapse">
            <div class="accordion-inner">
              <ul class="nav nav-list">
<li>
                  <a href="../../quickstart/connectcallnocode/">Connect a Call Without Code</a>
                </li>
                <li>
                  <a href="../../quickstart/createconfnocode/">Create a Conference Without Code</a>
                </li>
                <li>
                  <a href="../../quickstart/confwithpincode/">A Conference With Pin Code</a>
                </li>
                <li>
                  <a href="../../quickstart/restapicreatecall/">Create A Call With the REST API</a>
                </li>
                <li>
                  <a href="../../quickstart/modifycall/">Modify An Existing Call</a>
                </li>
                <li>
                  <a href="../../quickstart/restapicreateconf/">Create A Conference Call With The REST API</a>
                </li>
                <li>
                  <a href="../../quickstart/restapiupdateconfig/">Update Your Number's Config With The REST API</a>
                </li>

              </ul>
</div>
          </div>
          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionRestRef" href="#collapseRestRef"><i class="icon-chevron-down"></i></a><a href="../../restref/">RESTful API Reference</a>
            </div>
          <div id="collapseRestRef" class="accordion-body collapse">
            <div class="accordion-inner">
              <ul class="nav nav-list">
<li>
                  <a href="../../restref/request/">HTTP Request</a>
                </li>

                <li>
                  <a href="../../restref/resources/">Resources</a>
                  </li>
<li>
                    <ul class="nav nav-list">
<li>
                        <a href="../../restref/accountresources/">Account Management Resources</a>
                      </li>
                      <li>
                        <ul class="nav nav-list">
<li>
                            <a href="../../restref/account/">Account</a>
                          </li>
                          <li>
                            <a href="../../restref/accountnumber/">Account Number</a>
                          </li>
                          <li>
                            <a href="../../restref/accountconfigrulescollection/">Account Config Rules Collection</a>
                          </li>
                        </ul>
</li>
                      <li>
                        <a href="../../restref/availablenumberscollection/">Available Numbers Collection</a>
                      </li>
                      <li>
                        <a href="../../restref/calls/">Calls Resources</a>
                      </li>
                      <li>
                          <ul class="nav nav-list">
<li>
                              <a href="../../restref/callcollection/">Call Collection</a>
                            </li>
                            <li>
                              <a href="../../restref/call/">Call</a>
                            </li>
                            <li>
                              <a href="../../restref/calllegscollection/">Calls Leg Collection</a>
                            </li>
                            <li>
                              <a href="../../restref/callleg/">Call Leg</a>
                            </li>
                            <li>
                              <a href="../../restref/modifycall/">Modify Call - Set Commands</a>
                            </li>
                          </ul>
</li>
                      <li>
                        <a href="../../restref/sms/">SMS Resources</a>
                      </li>
                    </ul>
</li>
                

                <li>
                  <a href="../../restref/callstatuses/">Call Statuses</a>
                </li>
                <li>
                  <a href="../../restref/calllegstatuses/">Call Leg Statuses</a>
                </li>
              </ul>
</div>
          </div>
          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionCommandRef" href="#collapseCommandRef"><i class="icon-chevron-down"></i></a><a href="../">Call Control Commands Reference</a>
            </div>
          <div id="collapseCommandRef" class="accordion-body collapse">
            <div class="accordion-inner">
              <ul class="nav nav-list">
<li>
                  <a href="./">Providing Call Commands</a>
                </li>
                <li>
                  <a href="../dial/">Dial</a>
                </li>
                <li>
                  <ul class="nav nav-list">
<li>
                      <a href="../dialnumber/">Dial Number</a>
                    </li>
                    <li>
                      <a href="../dialconference/">Dial Conference</a>
                    </li>
                    <li>
                      <a href="../dialcallid/">Dial Call Id</a>
                    </li>
                  </ul>
</li>
                <li>
                  <a href="../speak/">Speak</a>
                </li>
                <li>
                  <a href="../play/">Play</a>
                </li>
                <li>
                  <a href="../getdigits/">GetDigits</a>
                </li>
                <li>
                  <a href="../hangup/">HangUp</a>
                </li>
                <li>
                  <a href="../redirect/">Redirect</a>
                </li>
                <li>
                  <a href="../wait/">Wait</a>
                </li>
                <li>
                  <a href="../sms/">SMS</a>
                </li>
                <li>
                  <a href="../commandchains/">Command Chains</a>
                </li>
              </ul>
</div>
          </div>
          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionNotifications" href="#collapseNotifications"><i class="icon-chevron-down"></i></a><a href="../../notifications/">Notification Events Reference</a>
            </div>
          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionErrorCodes" href="#collapseErrorCodes"><i class="icon-chevron-down"></i></a><a href="../../errorcodes/">Voice and SMS Error Codes</a>
            </div>
          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionRoadmap" href="#collapseRoadmap"><i class="icon-chevron-down"></i></a><a href="../../roadmap/">Roadmap</a>
            </div>
          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionPlay" href="#collapsePlay"><i class="icon-chevron-down"></i></a><a href="../../play/">Play ...</a>
            </div>
          <div id="collapsePlay" class="accordion-body collapse">
            <div class="accordion-inner">
              <ul class="nav nav-list">
<li>
                  <a href="../../play/">BBC Newsreader</a>
                </li>
                <li>
                  <a href="../../play/panicbutton/">Rasberry Pi Panic Button</a>
                </li>
              </ul>
</div>
          </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- /sidebar-module -->
<div class="page-footer">
  <div id="footer" class="container-fluid">
    <div class="row-fluid">
      <div class="footer_inner clearfix offset1">

        <ul class="footer_nav span2 unstyled">
<h4><a href="http://bluevia.com">Bluevia</a></h4>
          <li>
            <a href="https://bluevia.com/en/page/tour">Tour</a>
          </li>
          <li>
            <a href="http://bluevia.com/ot-www/webroot/index.php/en/page/boilerplate.TermsAndConds">terms and conditions</a>
          </li>
          <li>
            <a href="http://bluevia.com/ot-www/webroot/index.php/en/page/boilerplate.Privacy">privacy policy</a>
          </li>
          <li>
            <a href="http://bluevia.com/ot-www/webroot/index.php/en/page/boilerplate.Accessibility">accesibility</a>
          </li>
        </ul>
<ul class="footer_nav span2 unstyled">
<h4><a href="https://bluevia.com/en/page/tech">Tech Stuff</a></h4>
            <li>
                <a href="https://bluevia.com/en/page/tech.overview">Overview</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/tech.howto">How To</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/tech.APIs">APIs</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/tech.libraries">Libraries</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/tech.bluevialab">BlueVia Lab</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/tech.arduino">Arduino</a>
            </li>
        </ul>
<ul class="footer_nav span2 unstyled">
<h4><a href="https://bluevia.com/en/page/biz">Biz Stuff</a></h4>
            <li>
                <a href="https://bluevia.com/en/page/biz.businessmodels">Business Models</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/biz.digitalgoods">Selling Digital Goods</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/biz.getpaid">Get Paid</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/biz.marketingstuff">Marketing Stuff</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/biz.wayra">Wayra</a>
            </li>
        </ul>
<ul class="footer_nav span2 unstyled">
<h4><a href="https://bluevia.com/en/page/inspiration">Inspiration</a></h4>
            <li>
                <a id="menu-case" href="https://bluevia.com/en/page/inspiration.appiversary">Appiversary</a>
            </li>
            <li>
                <a id="menu-case" href="https://bluevia.com/en/page/inspiration.facejam">FaceJam</a>
            </li>
            <li>
                <a id="menu-case" href="https://bluevia.com/en/page/inspiration.facetones">Facetones</a>
            </li>
            <li>
                <a id="menu-case" href="https://bluevia.com/en/page/inspiration.textdeck">Textdeck</a>
            </li>
            <li>
                <a id="menu-case" href="https://bluevia.com/en/page/inspiration">More...</a>
            </li>
        </ul>
<ul class="footer_nav span2 unstyled">
<h4>Support</h4>
          <li>
            <a href="https://bluevia.com/en/page/support">contact us</a>
          </li>
        </ul>
</div>
    </div>
    <div class="row-fluid">

    </div>
    <!-- /.site --> </div>
  <!-- /#footer -->
</div>
<script>

  $(".apidoc li > dl > dt").addClass("span3");
  $(".apidoc dl dl dt").addClass("span4");
  $(".apimethod dt").addClass("span2");
  $(".apimethod dd").addClass("offset1");

  // Highlighting current page in the sidebar menu
  pathname = window.location.pathname;
  $("a[href='./']").parent().addClass("active");
  $("a[href='./']").parents(".collapse").collapse("show");

  pathtitle = $("#sidebar a[href='./']")[0];


  // Previous and next links
  menuLinks = $("#sidebar a").not(".accordion-toggle");
  pageIndex = $(menuLinks).index($(pathtitle));

  prevPageIndex = pageIndex-1;
  if ( $($(menuLinks)[prevPageIndex]).attr("href") == "./" )
    prevPageIndex = prevPageIndex - 1;
  prevPage = $($(menuLinks)[prevPageIndex]).clone();

  nextPageIndex = pageIndex+1;
  if ( $($(menuLinks)[nextPageIndex]).attr("href") == "./" )
    nextPageIndex = nextPageIndex + 1;
  nextPage = $($(menuLinks)[nextPageIndex]).clone();

  $(prevPage).prepend("<< ");
  $(nextPage).append(" >>");

  $("#prevPage").html($(prevPage));
  $("#nextPage").html($(nextPage));

  // Breadcrumbs
  parentGroup = $(pathtitle).parents(".accordion-group");
  parentCategoryText = $(".accordion-heading a:last",parentGroup)[0];
  if(parentCategoryText != null) {
    if($(parentCategoryText).text() != $(pathtitle).text())
      $(".breadcrumb li.active").before('<li><a href="'+$(parentCategoryText).attr("href")+'">'+$(parentCategoryText).text()+'</a> <span class="divider">/</span></li>');
  }
  if (pathtitle != null)
    $(".breadcrumb .active").text(pathtitle.text);

</script>
</body>
</html>
