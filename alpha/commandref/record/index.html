<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Language" content="en-us">
<meta http-equiv="imagetoolbar" content="false">
<meta name="MSSmartTagsPreventParsing" content="true">
<title></title>
<link href="../../../css/bootstrap.min.css" rel="stylesheet" media="screen">
<style type="text/css">
  h1, h2, h3, h4, h5 {
    color: #006595;
  }
  .page-header {
    background: url("http://www.bluevia.com/img/fileteBottomHeaderUservoice.jpg") repeat-x scroll left bottom transparent;
    border: none;
    margin-top: 5px;
    margin-bottom: 20px;
  }
  .page-footer {
    background: url(http://www.bluevia.com/img/footerBG.gif) top left repeat-x;
    padding-top: 10px;
  }
  .page-footer h4 {
    color: #47C3D3;
    display: block;
    font-size: 19px;
    font-style: normal;
    font-weight: bold;
    letter-spacing: 1px;
    margin-bottom: 30px;
    text-transform: uppercase;
    text-decoration: none;
  }
  .page-footer li {
    border-bottom: #CCC 1px dotted;
  }
  .page-footer li a{
    font-style: italic;
    font-family: Georgia,"Times New Roman",Times,serif;
    list-style: none;
    display: list-item;
    line-height: 28px;
    font-size: 13px;
    color: #666;
    text-transform: lowercase;
    letter-spacing: normal;
    margin-bottom: 0;
    margin-left: 0;
  }
    .page-footer li a:hover{
      color: #000;
      text-decoration: none;
  }
  a {
    color: #47c3d3
  }
  a:hover {
    text-decoration: none;
    color: #006595;
  }
  #header .logo img {
    vertical-align: baseline;
  }
  #header .logo span {
    padding-bottom: 15px;
  }
  .accordion-toggle.inline {
    display: inline-block;
    background: #eee;
    margin-right: 10px;
  }
.accordion-toggle.inline:hover {
    background: #e6e6e6;
  }
.apidoc dd {
  display: table-row;
}
.apidoc li {
  list-style: none;
}
.apidoc .tab-pane > ul {
  margin-left: 0px;
}
.well.apimethodgroup {
  background: white;
}
.icon-chevron-down {
  cursor: pointer;
}
.bottomLinks {
  padding-bottom: 20px;
}
em {
  //background: #eef;
  color: #009;
  border-bottom: 1px #009 dotted;
}

  </style>
</head>
<body class="api" data-spy="scroll" data-target=".sidemenu">
  <script src="http://code.jquery.com/jquery-latest.js"></script><script src="../../../js/bootstrap.min.js"></script><div id="header-wrapper" class="page-header">
    <div id="header" class="container-fluid">
      <div class="row-fluid">
        <a class="logo offset1" href="../../../">
          <img src="http://bluevia.com/img/BlueVia-Hdr-Logo-SML.png" width="100" alt="Bluevia Logo"><span class="lightblue"></span>
        </a>

      </div>
    </div>
    <!-- #header --> </div>
  <!-- #header-wrapper -->

  <div class="container-fluid">
    <div class="row-fluid">
      <div class="content span8 offset1">

        <ul class="breadcrumb">
<li>
<a href="../../../">Home</a> <span class="divider">/</span>
</li>
          <li class="active">
        </ul>
<h1 id="record">Record</h1>

<p>The record command allows you to record a call, or part of a call. The entire call can be recorded or selected call legs can also be recorded.</p>

<p>@todo figure out how to record a specific leg of a call and provide an example</p>

<p>Within the <em>record</em> command, the following supporting elements can be provided:</p>

<ul>
<li>
<em>timeout</em> - positive integer, default of 15 seconds. If there is silence on the call for this time period then the recording is stopped. @todo verify this</li>
  <li>
<em>playBeep</em> - true/false - play a beep before recording, default false	</li>
  <li>
<em>finishOnKey</em> - any digit, * or #, there is no default. This must be specified if you use this element.</li>
  <li>
<em>maximumLength</em> - integer value &gt;= 1, number of seconds to record, default of 60</li>
  <li>
<em>recordCall</em> - true/false record the entire call session, default false</li>
  <li>
    <table><tbody><tr>
<td>
<em>recordAfterConnect</em> - true</td>
          <td>false record the entire call after call has connected, default false</td>
        </tr></tbody></table>
</li>
  <li>a <em>speak</em> or <em>play</em> command can be added within the record command. This command is executed prior to the recording activity commencing. If recordCall, or recordAfterConnect are set to true then the speak  or play  command will be included within the recording. Otherwise the recording will commence after the speak or play  element has been completed </li>
  <li>
<em>export</em> - this element allows you to specify a location that BlueVia will make a HTTP PUT request to, in order to provide your recording to you. NOTE: for the alpha release of the BLueVia Voice API we don’t offer hosting support for the recordings made via the API. See the <a href="../../overview/knownlimitations/">Known Alpha Limitations</a> for all BLueVia Voice API alpha limitations.</li>
  <li>As this element can refer to external services there are various integrations supported. To use the export function to:
    <ul>
<li>@todo complete the detail of the export to AWS and PUT on own server. Validate the detail that is here.</li>
      <li>POST or PUT the recording on your server specify:
        <ul>
<li>
<em>actionUrl</em> - the URL that will handle the HTTP PUT request</li>
          <li>
<em>fileName</em> - also in the PUT command?</li>
        </ul>
</li>
      <li>PUT the recording in Amazon S3 buckets specify:
        <ul>
<li>
<em>aws-key</em> - your AWS Key </li>
          <li>
<em>aws-secret</em> - your AWS secret </li>
          <li>
<em>aws-bucket</em> - your AWS bucket name</li>
          <li>
<em>aws-host</em> - The host name or your AWS bucket e.g. s3.amazonaws.com</li>
          <li>
<em>filename</em> - The filename that you wish to save the recording as. If not specified a filename will be automatically allocated, by the TU Core platform</li>
        </ul>
</li>
    </ul>
</li>
</ul>
<h2 id="json-examples">JSON Examples</h2>

<p>The following examples demonstrate how you can use the record command</p>

<ul>
<li>
    <p>record the name of a conference participant and export to your server</p>

    <pre><code>  {
      "commands": [
          {
              "speak": {
                  "text": "Please record your name, then press hash",
                  "voice": "Female"
              }
          },
          {
              "record": {
                  "finishOnKey": "#",
                  "playBeep": "true",
                  "export": {
                      "url": "http://my.domain.com/myRecordingHandler"
                  }
              }
          }
      ]
  }
</code></pre>

    <ul>
<li>The caller will hear the speak command, followed by a beep, as specified by the playBeep attribute.</li>
      <li>The caller will then be able to record their name and finish the recording by selecting the ‘#’ key.</li>
      <li>Once the caller has selected the ‘#’ key the completed recording will be HTTP PUT by BlueVia to the your specified actionUrl </li>
      <li>
<strong>NOTE</strong>: As highlighted in the <a href="../../overview/knownlimitations/">Known Alpha Limitations</a> discussion, there may be a time period from the completion of the recording made by BlueVia, to the time that it is finished being PUT by BlueVia on your actionUrl. This is network dependant and largely out of the control of BlueVia. This should not be a problem with smaller files, such as in this case with the recording of the callers name prior to entering a conference, however if you are recording an entire call, there may be a time delay, upon completing the recording, to when you can actually use the recording, for example, if you want to stream the resultant recording using a <a href="../play/">play command</a> </li>
    </ul>
</li>
  <li>
    <p>recording an entire call and posting the recording to Amazon Web Services S3 Storage (AWS)</p>

    <pre><code>  @todo working AWS example
</code></pre>
  </li>
  <li>
    <p>recording a selected leg of a call and posting to AWS S3 Storage</p>

    <pre><code>  @todo working AWS example
</code></pre>
  </li>
</ul>
<h2 id="xml-examples">XML Examples</h2>

<p>The same record JSON commands can be described in XML as follows </p>

<pre><code>@todo complete XML samples and validate
</code></pre>

<!-- Bluevia  -->

<!-- Overview -->

<!-- Restref -->

<!-- Notifications -->

<!-- Command ref -->

<!-- Roadmap -->

<!-- Error codes -->

<!-- account -->

<!-- accountresources-->

<!--Resources-->

<!--accountnumber -->

<!--availablenumberscollection-->

<p><a href="../../restref/accountnumber/">Account Numbers</a>: https:</p>

<!--Calls Resources -->
<p>[Call Collection][URL_To_BlueVia_Voice_Call_Collection]
[Call][URL_To_BlueVia_Voice_RESTful_Call]
[Calls Leg Collection][URL_To_BlueVia_Voice_RESTful_Calls_Leg_Collection]
[Call Leg][URL_To_BlueVia_Voice_RESTful_Call_Leg]</p>

<!--call-->

<!--callcollection-->

<!--Calleg-->

<!--Callegscollection-->

<!--Calls-->
<p>[URL_To_BlueVia_Voice_Call_Evcent_Notification]  http://</p>

<p><a href="https:">URL_To_BlueVia_Voice_And_SMS_Error_Codes</a></p>

<!--index-->

<p>[URL_To_BlueVia_Roadmap]</p>

<!--Recordings-->
<p><a href="https:">URL_To_Known_Limitations</a> http://
[URL_To_Recording_Command] http://</p>


        <hr>
<span id="prevPage" class="bottomLinks pull-left"></span>
        <span id="nextPage" class="bottomLinks pull-right"></span>

      </div>

      <div id="sidebar" class="span3">
        <div class="accordion" id="accordionMenu">
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionOverview" href="#collapseOverview"><i class="icon-chevron-down"></i></a><a href="../../overview/">Overview</a>
            </div>
          <div id="collapseOverview" class="accordion-body collapse">
            <div class="accordion-inner">
              <ul class="js-guides nav nav-list sidemenu">
<li>
                  <a href="../../overview/restapi/">BlueVia Voice RESTful API</a>
                </li>
                <li>
                  <a href="../../overview/callcontrol/">BlueVia Voice Call Control Commands</a>
                </li>
                <li>
                  <a href="../../overview/callflows/">Call Flows</a>
                </li>
                <li>
                  <a href="../../overview/existing/">Existing BlueVia APIs and the BlueVia Voice API</a>
                </li>
                <li>
                  <a href="../../overview/balance/">Adding Balance To Your BlueVia Account</a>
                </li>
                <li>
                  <a href="../../overview/numbers/">Buying Numbers</a>
                </li>
                <li>
                  <a href="../../overview/configure/">Configuring Your BlueVia Numbers</a>
                </li>
                <li>
                  <a href="../../overview/usingnumbers/">Using Your BlueVia Voice Numbers</a>
                </li>
                <li>
                  <a href="../../overview/pricing/">BlueVia Voice API Costs</a>
                </li>
                <li>
                  <a href="../../overview/knownlimitations/">Known Alpha Limitations</a>
                </li>
              </ul>
</div>
          </div>

          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionQuickstart" href="#collapseQuickstart"><i class="icon-chevron-down"></i></a><a href="../../quickstart/">Quick Start Guides</a>
            </div>
          <div id="collapseQuickstart" class="accordion-body collapse">
            <div class="accordion-inner">
              <ul class="nav nav-list">
<li>
                  <a href="../../quickstart/connectcallnocode/">Connect a Call Without Code</a>
                </li>
                <li>
                  <a href="../../quickstart/createconfnocode/">Create a Conference Without Code</a>
                </li>
                <li>
                  <a href="../../quickstart/confwithpincode/">A Conference With Pin Code</a>
                </li>
                <li>
                  <a href="../../quickstart/addrecording/">Record Conference Participants Names</a>
                </li>
                <li>
                  <a href="../../quickstart/restapicreatecall/">Create A Call With the REST API</a>
                </li>
                <li>
                  <a href="../../quickstart/modifycall/">Modify An Existing Call</a>
                </li>
                <li>
                  <a href="../../quickstart/restapicreateconf/">Create A Conference Call With The REST API</a>
                </li>
                <li>
                  <a href="../../quickstart/restapiupdateconfig/">Update Your Number's Config With The REST API</a>
                </li>

              </ul>
</div>
          </div>
          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionRestRef" href="#collapseRestRef"><i class="icon-chevron-down"></i></a><a href="../../restref/">RESTful API Reference</a>
            </div>
          <div id="collapseRestRef" class="accordion-body collapse">
            <div class="accordion-inner">
              <ul class="nav nav-list">
<li>
                  <a href="../../restref/request/">HTTP Request</a>
                </li>
              
                <li>
                  <a href="../../restref/resources/">Resources</a>
                


                  </li>
<li>
                    <ul class="nav nav-list">
<li>
                        <a href="../../restref/accountresources/">Account Management Resources</a>
                            </li>
<li>
                              <ul class="nav nav-list">
<li>
                                  <a href="../../restref/account/">Account</a>
                                </li>
                                <li>
                                  <a href="../../restref/availablenumberscollection/">Available Numbers Collection</a>
                                </li>
                                <li>
                                  <a href="../../restref/accountnumber/">Account Number</a>
                                </li>
                                <li>
                                  <a href="../../restref/accountconfigrulescollection/">Account Config Rules Collection</a>
                                </li>
                                <li>
                                  <a href="../../restref/recordings/">Recordings</a>
                                </li>
                              </ul>
</li>
                      </ul>
</li>



                      <li>
                        <a href="../../restref/availablenumberscollection/">Available Numbers Collection</a>
                      </li>
                      <li>
                        <a href="../../restref/calls/">Calls Resources</a>
                          </li>
<li>
                              <ul class="nav nav-list">
<li>
                                <a href="../../restref/callcollection/">Call Collection</a>
                                </li>
                                <li>
                                  <a href="../../restref/call/">Call</a>
                                </li>
                                <li>
                                  <a href="../../restref/calllegscollection/">Calls Leg Collection</a>
                                </li>
                                <li>
                                  <a href="../../restref/callleg/">Call Leg</a>
                                </li>
                              </ul>
</li>
                      
                      <li>
                        <a href="../../restref/sms/">SMS Resources</a>
                      </li>
                    </ul>
<li>
                  <a href="../../restref/specificlegs/">Send Commands To Specific Legs</a>
                </li>
                <li>
                  <a href="../../restref/callstatuses/">Call Statuses</a>
                </li>
                <li>
                  <a href="../../restref/calllegstatuses/">Call Leg Statuses</a>
                </li>
              
            </div>
          </div>
          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionCommandRef" href="#collapseCommandRef"><i class="icon-chevron-down"></i></a><a href="../">Call Control Commands Reference</a>
            </div>
          <div id="collapseCommandRef" class="accordion-body collapse">
            <div class="accordion-inner">
              <ul class="nav nav-list">
<li>
                  <a href="../sendingcallcommands/">Providing Call Commands</a>
                </li>
                <li>
                  <a href="../dial/">Dial</a>
                </li>
                <li>
                  <ul class="nav nav-list">
<li>
                      <a href="../dialnumber/">Dial Number</a>
                    </li>
                    <li>
                      <a href="../dialconference/">Dial Conference</a>
                    </li>
                    <li>
                      <a href="../dialcallid/">Dial Call Id</a>
                    </li>
                  </ul>
</li>
                <li>
                  <a href="../speak/">Speak</a>
                </li>
                <li>
                  <a href="../play/">Play</a>
                </li>
                <li>
                  <a href="../getdigits/">GetDigits</a>
                </li>
                <li>
                  <a href="./">Record</a>
                </li>
                <li>
                  <a href="../hangup/">HangUp</a>
                </li>
                <li>
                  <a href="../redirect/">Redirect</a>
                </li>
                <li>
                  <a href="../wait/">Wait</a>
                </li>
                <li>
                  <a href="../sms/">SMS</a>
                </li>
                <li>
                  <a href="../commandstospecificlegs/">Send Commands To Specific Legs</a>
                </li>
                <li>
                  <a href="../commandchains/">Command Chains</a>
                </li>
              </ul>
</div>
          </div>
          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionNotifications" href="#collapseNotifications"><i class="icon-chevron-down"></i></a><a href="../../notifications/">Notification Events Reference</a>
            </div>
          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionErrorCodes" href="#collapseErrorCodes"><i class="icon-chevron-down"></i></a><a href="../../errorcodes/">Voice and SMS Error Codes</a>
            </div>
          <div id="collapseErrorCodes" class="accordion-body collapse">
            <div class="accordion-inner">
              <ul class="nav nav-list">
<li>
                  <a href="../../errorcodes/">Subsection</a>
                </li>
              </ul>
</div>
          </div>
          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionRoadmap" href="#collapseRoadmap"><i class="icon-chevron-down"></i></a><a href="../../roadmap/">Roadmap</a>
            </div>
          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionPlay" href="#collapsePlay"><i class="icon-chevron-down"></i></a><a href="../../play/">Play ...</a>
            </div>
          <div id="collapsePlay" class="accordion-body collapse">
            <div class="accordion-inner">
              <ul class="nav nav-list">
<li>
                  <a href="../../play/">BBC Newsreader</a>
                </li>
                <li>
                  <a href="../../play/panicbutton/">Rasberry Pi Panic Button</a>
                </li>
              </ul>
</div>
          </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- /sidebar-module -->
<div class="page-footer">
  <div id="footer" class="container-fluid">
    <div class="row-fluid">
      <div class="footer_inner clearfix offset1">

        <ul class="footer_nav span2 unstyled">
<h4><a href="http://bluevia.com">Bluevia</a></h4>
          <li>
            <a href="https://bluevia.com/en/page/tour">Tour</a>
          </li>
          <li>
            <a href="http://bluevia.com/ot-www/webroot/index.php/en/page/boilerplate.TermsAndConds">terms and conditions</a>
          </li>
          <li>
            <a href="http://bluevia.com/ot-www/webroot/index.php/en/page/boilerplate.Privacy">privacy policy</a>
          </li>
          <li>
            <a href="http://bluevia.com/ot-www/webroot/index.php/en/page/boilerplate.Accessibility">accesibility</a>
          </li>
        </ul>
<ul class="footer_nav span2 unstyled">
<h4><a href="https://bluevia.com/en/page/tech">Tech Stuff</a></h4>
            <li>
                <a href="https://bluevia.com/en/page/tech.overview">Overview</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/tech.howto">How To</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/tech.APIs">APIs</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/tech.libraries">Libraries</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/tech.bluevialab">BlueVia Lab</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/tech.arduino">Arduino</a>
            </li>
        </ul>
<ul class="footer_nav span2 unstyled">
<h4><a href="https://bluevia.com/en/page/biz">Biz Stuff</a></h4>
            <li>
                <a href="https://bluevia.com/en/page/biz.businessmodels">Business Models</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/biz.digitalgoods">Selling Digital Goods</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/biz.getpaid">Get Paid</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/biz.marketingstuff">Marketing Stuff</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/biz.wayra">Wayra</a>
            </li>
        </ul>
<ul class="footer_nav span2 unstyled">
<h4><a href="https://bluevia.com/en/page/inspiration">Inspiration</a></h4>
            <li>
                <a id="menu-case" href="https://bluevia.com/en/page/inspiration.appiversary">Appiversary</a>
            </li>
            <li>
                <a id="menu-case" href="https://bluevia.com/en/page/inspiration.facejam">FaceJam</a>
            </li>
            <li>
                <a id="menu-case" href="https://bluevia.com/en/page/inspiration.facetones">Facetones</a>
            </li>
            <li>
                <a id="menu-case" href="https://bluevia.com/en/page/inspiration.textdeck">Textdeck</a>
            </li>
            <li>
                <a id="menu-case" href="https://bluevia.com/en/page/inspiration">More...</a>
            </li>
        </ul>
<ul class="footer_nav span2 unstyled">
<h4>Support</h4>
          <li>
            <a href="https://bluevia.com/en/page/support">contact us</a>
          </li>
        </ul>
</div>
    </div>
    <div class="row-fluid">

    </div>
    <!-- /.site --> </div>
  <!-- /#footer -->
</div>
<script>

  $(".apidoc li > dl > dt").addClass("span3");
  $(".apidoc dl dl dt").addClass("span4");
  $(".apimethod dt").addClass("span2");
  $(".apimethod dd").addClass("offset1");

  // Highlighting current page in the sidebar menu
  pathname = window.location.pathname;
  $("a[href='./']").parent().addClass("active");
  $("a[href='./']").parents(".collapse").collapse("show");

  pathtitle = $("#sidebar a[href='./']")[0];


  // Previous and next links
  menuLinks = $("#sidebar a").not(".accordion-toggle");
  pageIndex = $(menuLinks).index($(pathtitle));
  prevPage = $($(menuLinks)[pageIndex - 1]).clone();
  nextPage = $($(menuLinks)[pageIndex + 1]).clone();
  $(prevPage).prepend("<< ");
  $(nextPage).append(" >>");

  $("#prevPage").html($(prevPage));
  $("#nextPage").html($(nextPage));

  // Breadcrumbs
  parentGroup = $(pathtitle).parents(".accordion-group");
  parentCategoryText = $(".accordion-heading a:last",parentGroup)[0];
  if(parentCategoryText != null) {
    if($(parentCategoryText).text() != $(pathtitle).text())
      $(".breadcrumb li.active").before('<li><a href="'+$(parentCategoryText).attr("href")+'">'+$(parentCategoryText).text()+'</a> <span class="divider">/</span></li>');
  }
  if (pathtitle != null)
    $(".breadcrumb .active").text(pathtitle.text);

</script>
</body>
</html>
