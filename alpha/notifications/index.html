<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Language" content="en-us">
<meta http-equiv="imagetoolbar" content="false">
<meta name="MSSmartTagsPreventParsing" content="true">
<title></title>
<link href="../../css/bootstrap.min.css" rel="stylesheet" media="screen">
<link href="../../css/bluevia_style.css" rel="stylesheet" media="screen">
</head>
<body class="api" data-spy="scroll" data-target=".sidemenu">
  <script src="http://code.jquery.com/jquery-latest.js"></script><script src="../../js/bootstrap.min.js"></script><div id="header-wrapper" class="page-header">
    <div id="header" class="container-fluid">
      <div class="row-fluid">
        <a class="logo offset1" href="../../">
          <img src="http://bluevia.com/img/BlueVia-Hdr-Logo-SML.png" width="100" alt="Bluevia Logo"><span class="lightblue"></span>
        </a>

      </div>
    </div>
    <!-- #header --> </div>
  <!-- #header-wrapper -->

  <div class="container-fluid">
    <div class="row-fluid">
      <div class="content span8 offset1">

        <ul class="breadcrumb">
<li>
<a href="../../">Home</a> <span class="divider">/</span>
</li>
          <li class="active">
        </ul>
<h1 id="bluevia-voice-call-notification-events-reference">BlueVia Voice Call Notification Events Reference</h1>

<p>During a call BlueVia may send notifications for in-call events that occur during a calls. BlueVia will HTTP POST these in call event notifications to the callback URL assigned to your number, or alternatively, if you have over-ridden the callback URL via a HTTP POST made to the <a href="../restref/callcollection/">Calls resource</a>. </p>

<p>For an inbound call to your <a href="https://nv.bluevia.com/en/communication/your-purchased-numbers">BlueVia Voice Number</a> a CalledNumber event is always HTTP POSTed to the callback URL associated with your number. Every time your BlueVia Voice Number is called, you will always receive a notification of this, via a <em>CalledNumber</em> event on your callback URL.</p>

<p>For an outbound call, created by a HTTP POST to the <a href="../restref/callcollection/">Calls resource</a> the first <em>Answered</em> event is always sent to the callback URL associated with the BlueVia Voice Number. The callback URL associated with your BlueVia Voice Number, can of course be over-ridden every time a HTTP POST request is made to the <a href="../restref/callcollection/">Calls resource</a>. As a result you can create a call specific callback URL should you wish to, that will receive call event notifications.</p>

<p>BlueVia Call Notifications are HTTP POSTed to your callback URLÆs and the body of the request will contain the event detail. The body of the HTTP POST request contains the JSON formatted response e.g.:</p>

<pre><code>{"timestamp":"&lt;datetime value&gt;","callerId":"tel:+4412345678","eventName":"&lt;nameOfTheEvent&gt;","callId":"&lt;theIDOfTheCallResource&gt;","legId":"&lt;theIDOfTheLeg&gt;","destination":"tel:+4423456789"}
</code></pre>

<p>Where</p>

<ul>
<li>
<em>timestamp</em> represents the time that the event occured</li>
  <li>
<em>callerId</em> is the ID of the calling party</li>
  <li>
<em>destination</em> represents the party being called</li>
  <li>
<em>eventName</em> is the name of the in call event - see below for further details on the types of events.</li>
  <li>
<em>callId</em> represents the ID of the call resource that the event has occurred on</li>
  <li>
<em>legId</em> represents the ID for the leg, within the call, that the event has occurred on</li>
</ul>
<p>There are also additional attributes for some of the different in call events. These are discussed in further detail in each of the following descriptions.</p>

<h2 id="in-call-event-notification-types">In Call Event Notification Types</h2>

<p>The following represent the different in call event types that can be provided to your callback URL. These are represented by the eventName attribute in the body of the HTTP POST request.</p>

<p><strong>NOTE:</strong> During the alpha period the only notifications provided will be</p>

<ul>
<li>the first Answered notification on an outbound call AND</li>
  <li>CalledNumber on an inbound call.</li>
</ul>
<p><strong>The discussion below relates to a feature that we are working on in whihc you will be able to receive these further in call events</strong></p>

<ul>
<li>
<em>CalledNumber</em> - occurs when your BlueVia Voice Number is called </li>
  <li>
<em>Answered</em> - when a called party answers. </li>
  <li>
<em>Ringing</em> - when the destination is ringing</li>
  <li>
<em>DigitsCollected</em> - this provides detail of any digits collected via DTMF input as the result of a <em>getDigits</em> command. This notification will have an additional attribute - <em>digits</em> which represents the input collected from the DTMF handset of the caller. <strong>NOTE:</strong> If you ask the caller to finish their DTMF input with a specific key press e.g. ‘#’, then this character will also appear in the digits attribute within the event notification.</li>
  <li>
<em>Busy</em> - in the event that the destination of the call is busy</li>
  <li><em>Failed</em></li>
  <li><em>NotReachable</em></li>
  <li><em>NoAnswer</em></li>
  <li>
<em>HangUp</em> - if a caller within a call hangs up. This event will have an additional attribute direction which represents how the call was Hung up. The direction attribute can have  one of two values - fromParticipant if someone on the call has Hung up, or fromApplication in the event that the event occured as a result of a HangUp command </li>
  <li>
<em>PlaybackStarted</em> - occurs when either a <em>speak</em> command or <em>play</em> command starts on a call</li>
  <li>
<em>PlaybackStopped</em> - occurs when either a <em>speak</em> command or <em>play</em> command finishes on a call</li>
  <li>
<em>RecordingStarted</em> - occurs when a recording starts due to a <em>record</em> command</li>
  <li>
<em>RecordingStopped</em> - occurs when a <em>recording</em> stops on a call</li>
  <li>
<em>Redirected</em> - when a redirect command is executed on a call</li>
</ul>
<p><strong>AGAIN NOTE:</strong> That you will only receive the following notifications during the alpha period:</p>

<ul>
<li>A <em>CalledNumber</em> event on an inbound call OR</li>
  <li>The first <em>Answered</em> event on an outbound call </li>
</ul>
<hr>
<span id="prevPage" class="bottomLinks pull-left"></span>
        <span id="nextPage" class="bottomLinks pull-right"></span>

      </div>

      <div id="sidebar" class="span3">
        <div class="accordion" id="accordionMenu">
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionOverview" href="#collapseOverview"><i class="icon-chevron-down"></i></a><a href="../overview/">Overview</a>
            </div>
          <div id="collapseOverview" class="accordion-body collapse">
            <div class="accordion-inner">
              <ul class="js-guides nav nav-list sidemenu">
<li>
                  <a href="../overview/restapi/">BlueVia Voice RESTful API</a>
                </li>
                <li>
                  <a href="../overview/callcontrol/">BlueVia Voice Call Control Commands</a>
                </li>
                <li>
                  <a href="../overview/callflows/">Call Flows</a>
                </li>
                <li>
                  <a href="../overview/existing/">Existing BlueVia APIs and the BlueVia Voice API</a>
                </li>
                <li>
                  <a href="../overview/balance/">Adding Balance To Your BlueVia Account</a>
                </li>
                <li>
                  <a href="../overview/numbers/">Buying Numbers</a>
                </li>
                <li>
                  <a href="../overview/configure/">Configuring Your BlueVia Numbers</a>
                </li>
                <li>
                  <a href="../overview/usingnumbers/">Using Your BlueVia Voice Numbers</a>
                </li>
                <li>
                  <a href="../overview/pricing/">BlueVia Voice API Costs</a>
                </li>
                <li>
                  <a href="../overview/knownlimitations/">Known Alpha Limitations</a>
                </li>
              </ul>
</div>
          </div>

          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionQuickstart" href="#collapseQuickstart"><i class="icon-chevron-down"></i></a><a href="../quickstart/">Quick Start Guides</a>
            </div>
          <div id="collapseQuickstart" class="accordion-body collapse">
            <div class="accordion-inner">
              <ul class="nav nav-list">
<li>
                  <a href="../quickstart/connectcallnocode/">Connect a Call Without Code</a>
                </li>
                <li>
                  <a href="../quickstart/createconfnocode/">Create a Conference Without Code</a>
                </li>
                <li>
                  <a href="../quickstart/confwithpincode/">A Conference With Pin Code</a>
                </li>
                <li>
                  <a href="../quickstart/restapicreatecall/">Create A Call With the REST API</a>
                </li>
                <li>
                  <a href="../quickstart/modifycall/">Modify An Existing Call</a>
                </li>
                <li>
                  <a href="../quickstart/restapicreateconf/">Create A Conference Call With The REST API</a>
                </li>
                <li>
                  <a href="../quickstart/restapiupdateconfig/">Update Your Number's Config With The REST API</a>
                </li>

              </ul>
</div>
          </div>
          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionRestRef" href="#collapseRestRef"><i class="icon-chevron-down"></i></a><a href="../restref/">RESTful API Reference</a>
            </div>
          <div id="collapseRestRef" class="accordion-body collapse">
            <div class="accordion-inner">
              <ul class="nav nav-list">
<li>
                  <a href="../restref/request/">HTTP Request</a>
                </li>

                <li>
                  <a href="../restref/resources/">Resources</a>
                  </li>
<li>
                    <ul class="nav nav-list">
<li>
                        <a href="../restref/accountresources/">Account Management Resources</a>
                      </li>
                      <li>
                        <ul class="nav nav-list">
<li>
                            <a href="../restref/account/">Account</a>
                          </li>
                          <li>
                            <a href="../restref/accountnumber/">Account Number</a>
                          </li>
                          <li>
                            <a href="../restref/accountconfigrulescollection/">Account Config Rules Collection</a>
                          </li>
                        </ul>
</li>
                      <li>
                        <a href="../restref/availablenumberscollection/">Available Numbers Collection</a>
                      </li>
                      <li>
                        <a href="../restref/calls/">Calls Resources</a>
                      </li>
                      <li>
                          <ul class="nav nav-list">
<li>
                              <a href="../restref/callcollection/">Call Collection</a>
                            </li>
                            <li>
                              <a href="../restref/call/">Call</a>
                            </li>
                            <li>
                              <a href="../restref/calllegscollection/">Calls Leg Collection</a>
                            </li>
                            <li>
                              <a href="../restref/callleg/">Call Leg</a>
                            </li>
                            <li>
                              <a href="../restref/modifycall/">Modify Call - Set Commands</a>
                            </li>
                          </ul>
</li>
                      <li>
                        <a href="../restref/sms/">SMS Resources</a>
                      </li>
                    </ul>
</li>
                

                <li>
                  <a href="../restref/callstatuses/">Call Statuses</a>
                </li>
                <li>
                  <a href="../restref/calllegstatuses/">Call Leg Statuses</a>
                </li>
              </ul>
</div>
          </div>
          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionCommandRef" href="#collapseCommandRef"><i class="icon-chevron-down"></i></a><a href="../commandref/">Call Control Commands Reference</a>
            </div>
          <div id="collapseCommandRef" class="accordion-body collapse">
            <div class="accordion-inner">
              <ul class="nav nav-list">
<li>
                  <a href="../commandref/sendingcallcommands/">Providing Call Commands</a>
                </li>
                <li>
                  <a href="../commandref/dial/">Dial</a>
                </li>
                <li>
                  <ul class="nav nav-list">
<li>
                      <a href="../commandref/dialnumber/">Dial Number</a>
                    </li>
                    <li>
                      <a href="../commandref/dialconference/">Dial Conference</a>
                    </li>
                    <li>
                      <a href="../commandref/dialcallid/">Dial Call Id</a>
                    </li>
                  </ul>
</li>
                <li>
                  <a href="../commandref/speak/">Speak</a>
                </li>
                <li>
                  <a href="../commandref/play/">Play</a>
                </li>
                <li>
                  <a href="../commandref/getdigits/">GetDigits</a>
                </li>
                <li>
                  <a href="../commandref/hangup/">HangUp</a>
                </li>
                <li>
                  <a href="../commandref/redirect/">Redirect</a>
                </li>
                <li>
                  <a href="../commandref/wait/">Wait</a>
                </li>
                <li>
                  <a href="../commandref/sms/">SMS</a>
                </li>
                <li>
                  <a href="../commandref/commandchains/">Command Chains</a>
                </li>
              </ul>
</div>
          </div>
          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionNotifications" href="#collapseNotifications"><i class="icon-chevron-down"></i></a><a href="./">Notification Events Reference</a>
            </div>
          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionErrorCodes" href="#collapseErrorCodes"><i class="icon-chevron-down"></i></a><a href="../errorcodes/">Voice and SMS Error Codes</a>
            </div>
          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionRoadmap" href="#collapseRoadmap"><i class="icon-chevron-down"></i></a><a href="../roadmap/">Roadmap</a>
            </div>
          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionPlay" href="#collapsePlay"><i class="icon-chevron-down"></i></a><a href="../play/">Play ...</a>
            </div>
          <div id="collapsePlay" class="accordion-body collapse">
            <div class="accordion-inner">
              <ul class="nav nav-list">
<li>
                  <a href="../play/">BBC Newsreader</a>
                </li>
                <li>
                  <a href="../play/panicbutton/">Rasberry Pi Panic Button</a>
                </li>
              </ul>
</div>
          </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- /sidebar-module -->
<div class="page-footer">
  <div id="footer" class="container-fluid">
    <div class="row-fluid">
      <div class="footer_inner clearfix offset1">

        <ul class="footer_nav span2 unstyled">
<h4><a href="http://bluevia.com">Bluevia</a></h4>
          <li>
            <a href="https://bluevia.com/en/page/tour">Tour</a>
          </li>
          <li>
            <a href="http://bluevia.com/ot-www/webroot/index.php/en/page/boilerplate.TermsAndConds">terms and conditions</a>
          </li>
          <li>
            <a href="http://bluevia.com/ot-www/webroot/index.php/en/page/boilerplate.Privacy">privacy policy</a>
          </li>
          <li>
            <a href="http://bluevia.com/ot-www/webroot/index.php/en/page/boilerplate.Accessibility">accesibility</a>
          </li>
        </ul>
<ul class="footer_nav span2 unstyled">
<h4><a href="https://bluevia.com/en/page/tech">Tech Stuff</a></h4>
            <li>
                <a href="https://bluevia.com/en/page/tech.overview">Overview</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/tech.howto">How To</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/tech.APIs">APIs</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/tech.libraries">Libraries</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/tech.bluevialab">BlueVia Lab</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/tech.arduino">Arduino</a>
            </li>
        </ul>
<ul class="footer_nav span2 unstyled">
<h4><a href="https://bluevia.com/en/page/biz">Biz Stuff</a></h4>
            <li>
                <a href="https://bluevia.com/en/page/biz.businessmodels">Business Models</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/biz.digitalgoods">Selling Digital Goods</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/biz.getpaid">Get Paid</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/biz.marketingstuff">Marketing Stuff</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/biz.wayra">Wayra</a>
            </li>
        </ul>
<ul class="footer_nav span2 unstyled">
<h4><a href="https://bluevia.com/en/page/inspiration">Inspiration</a></h4>
            <li>
                <a id="menu-case" href="https://bluevia.com/en/page/inspiration.appiversary">Appiversary</a>
            </li>
            <li>
                <a id="menu-case" href="https://bluevia.com/en/page/inspiration.facejam">FaceJam</a>
            </li>
            <li>
                <a id="menu-case" href="https://bluevia.com/en/page/inspiration.facetones">Facetones</a>
            </li>
            <li>
                <a id="menu-case" href="https://bluevia.com/en/page/inspiration.textdeck">Textdeck</a>
            </li>
            <li>
                <a id="menu-case" href="https://bluevia.com/en/page/inspiration">More...</a>
            </li>
        </ul>
<ul class="footer_nav span2 unstyled">
<h4>Support</h4>
          <li>
            <a href="https://bluevia.com/en/page/support">contact us</a>
          </li>
        </ul>
</div>
    </div>
    <div class="row-fluid">

    </div>
    <!-- /.site --> </div>
  <!-- /#footer -->
</div>
<script>

  $(".apidoc li > dl > dt").addClass("span3");
  $(".apidoc dl dl dt").addClass("span4");
  $(".apimethod dt").addClass("span2");
  $(".apimethod dd").addClass("offset1");

  // Highlighting current page in the sidebar menu
  pathname = window.location.pathname;
  $("a[href='./']").parent().addClass("active");
  $("a[href='./']").parents(".collapse").collapse("show");

  pathtitle = $("#sidebar a[href='./']")[0];


  // Previous and next links
  menuLinks = $("#sidebar a").not(".accordion-toggle");
  pageIndex = $(menuLinks).index($(pathtitle));

  prevPageIndex = pageIndex-1;
  if ( $($(menuLinks)[prevPageIndex]).attr("href") == "./" )
    prevPageIndex = prevPageIndex - 1;
  prevPage = $($(menuLinks)[prevPageIndex]).clone();

  nextPageIndex = pageIndex+1;
  if ( $($(menuLinks)[nextPageIndex]).attr("href") == "./" )
    nextPageIndex = nextPageIndex + 1;
  nextPage = $($(menuLinks)[nextPageIndex]).clone();

  $(prevPage).prepend("<< ");
  $(nextPage).append(" >>");

  $("#prevPage").html($(prevPage));
  $("#nextPage").html($(nextPage));

  // Breadcrumbs
  parentGroup = $(pathtitle).parents(".accordion-group");
  parentCategoryText = $(".accordion-heading a:last",parentGroup)[0];
  if(parentCategoryText != null) {
    if($(parentCategoryText).text() != $(pathtitle).text())
      $(".breadcrumb li.active").before('<li><a href="'+$(parentCategoryText).attr("href")+'">'+$(parentCategoryText).text()+'</a> <span class="divider">/</span></li>');
  }
  if (pathtitle != null)
    $(".breadcrumb .active").text(pathtitle.text);

</script>
</body>
</html>
