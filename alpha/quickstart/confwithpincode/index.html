<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Language" content="en-us">
<meta http-equiv="imagetoolbar" content="false">
<meta name="MSSmartTagsPreventParsing" content="true">
<title></title>
<link href="../../../css/bootstrap.min.css" rel="stylesheet" media="screen">
<link href="../../../css/bluevia_style.css" rel="stylesheet" media="screen">
</head>
<body class="api" data-spy="scroll" data-target=".sidemenu">
  <script src="http://code.jquery.com/jquery-latest.js"></script><script src="../../../js/bootstrap.min.js"></script><div id="header-wrapper" class="page-header">
    <div id="header" class="container-fluid">
      <div class="row-fluid">
        <a class="logo offset1" href="../../../">
          <img src="http://bluevia.com/img/BlueVia-Hdr-Logo-SML.png" width="100" alt="Bluevia Logo"><span class="lightblue"></span>
        </a>

      </div>
    </div>
    <!-- #header --> </div>
  <!-- #header-wrapper -->

  <div class="container-fluid">
    <div class="row-fluid">
      <div class="content span8 offset1">

        <ul class="breadcrumb">
<li>
<a href="../../../">Home</a> <span class="divider">/</span>
</li>
          <li class="active">
        </ul>
<h1 id="a-simple-conference-service-with-pin-codes">A Simple Conference Service With Pin-codes</h1>

<p>The following quick start guide is written in PHP. Of course modify to suit your needs!</p>

<p>In this demo, when you dial your BlueVia Voice Number:</p>

<ul>
<li>You will be asked if you wish to create a conference as a moderator
    <ul>
<li>you will be asked which pin-code you wish to use for your conference.</li>
      <li>if you ‘create’ the conference as a moderator, all other callers will be muted until you enter the conference.</li>
    </ul>
</li>
  <li>If you wish to join a conference as a participant, then you would be entering the conference with a pin-code previously supplied to you.</li>
</ul>
<p>This demo will require you to have access to a web server, running PHP. </p>

<p>There are three files for the demo which you can find in the Quick Start demo code from github  <strong>@todo: ADD LINK</strong> </p>

<ol>
<li><em>PincodeConference.php</em></li>
  <li>
<em>eventHandler.php</em> and</li>
  <li><em>startConfernece.php</em></li>
</ol>
<p>Update the configuration of the <a href="https://nv.bluevia.com/en/communication/your-purchased-numbers">BlueVia Voice Number</a> to point to the location where you host <em>PincodeConference.php</em>. This is the starting location for this demo. After you have configured your BlueVia Voice Number and you dial it, BlueVia will make a HTTP POST request to the URL pointing to <em>PincodeConference.php</em>.The HTTP POST will contain notification information in the body of the request. Detail of the <a href="../../notifications/">BlueVia Voice Call Notifications</a> at this stage is not important, other than we are expecting to receive a <em>CalledNumber</em> notification type. In fact in this case it is the only notification we will retrieve.</p>

<p>So in the following case the first thing you do is get the notification detail from the HTTP POST Request from BlueVia. So in <em>PincodeConference.php</em>:</p>

<pre><code>&lt;?php

// Get the POST request body
if (($stream = fopen('php://input', "r")) !== FALSE){
    $bodyContent = stream_get_contents($stream);
}

// get event data from the POST request body
$obj = json_decode($bodyContent);
$eventName = $obj-&gt;{'eventName'};
</code></pre>

<p>Then based on the notification type - again in this example the notification type will always be <em>CalledNumber</em> (A full list of notification types can be found in the <a href="../../notifications/">BlueVia Voice Call Notifications section</a>, you respond with a <a href="../../commandref/getdigits/">getDigits command</a>.   </p>

<pre><code>// only provide a response if this is an CalledNumber event
if ($eventName == "CalledNumber") {
	$response = "{
		\"commands\": [
			{
				\"getDigits\": {
					\"timeout\": 5,
					\"numberOfDigits\": 1,
					\"retries\": 2,
					\"actionUrl\": \"&lt;your-hostname-and-path&gt;/eventHandler.php\",
					\"speak\": {
						\"text\": \"Press 1 to create a new conference. Press 2 to join an existing conference call.\",
						\"voice\": \"Female\"
					}
				}
			},
			{
				\"speak\": {
					\"text\": \"Sorry, you didn't enter a selection in time. Please call and try again.\",
					\"voice\": \"Female\"
				}
			},
			{
				\"hangup\":{
				}
			
        		}

		]
	}";
	echo ($response);
}
?&gt;
</code></pre>

<p>In this case the getDigits command:</p>

<ul>
<li>Asks the caller to enter either 1 or 2, via the embedded <em>speak</em> command</li>
  <li>There is a 5 second <em>timeout</em>, and if the caller doesn’t enter a digit in time the <em>speak</em> command will be executed again. </li>
  <li>If after 2 <em>retries</em> the user has still not entered a selection, then the <em>getDigits</em> command exits and the second <em>speak</em> command is executed before the call is then terminated via the <em>hangup</em> command.</li>
  <li>Assuming success though(!) - if the user enters a single digit on their keypad, specified by the <em>numberOfDigits</em> element then this data is sent to the second PHP script included in the provided Quick Start Code Samples <strong>TODO ADD GITHUB LINK</strong> - <em>eventHandler.php</em>
</li>
</ul>
<p>Looking at the <em>eventHandler.php</em> code. Again you retrieve the eventName from the HTTP POST request body, and in this case there is a switch based on the <em>eventName</em>, which in the case of request generate by BlueVia for a getDigits command will be a <em>DigitsCollected</em> notification. So the first case covered is the event that the called has selected 1, i.e. is a moderator on the conference</p>

<pre><code>switch ($eventName) {
    case "DigitsCollected":
	$digitsCollected = $obj-&gt;{'digits'};
	switch ($digitsCollected) {
		case "1":
			$response = "{
					\"commands\": [
						{
							\"getDigits\": {
								\"speak\": {
									\"text\": \"Please enter the pin you wish to use for your conference, followed by the hash key\",
									\"voice\": \"Female\"
								},
								\"finishOnKey\": \"#\",
								\"timeout\": \"15\",
								\"retries\": \"2\",
								\"actionUrl\": \"&lt;your-hostname-and-path&gt;/startConference.php?state=moderator\"
							}
						},
						{
							\"speak\": {
								\"text\": \"Sorry, you didn't enter the number in time. We can't help you\",
								\"voice\": \"Female\"
							}
						}					]
				}";
				echo ($response);
		break;
</code></pre>

<p>In this case we ask the <em>‘moderator’</em> for further input - to key in the pincode they wish to assign for the conference. The only significant difference in the <em>getDigits</em> command is:</p>

<ul>
<li>In the <em>speak</em> command we ask the caller to end their keypad input by selecting the hash (#) key on their keypad. This can be accomplished by using the <em>finishOnKey</em> attribute.</li>
  <li>The URL for the <em>getDigits</em> result is the third PHP script in the Quick Start sample code <em>startConfernece.php</em> and you are passing in a URL parameter specifying that the response is for a conference moderator.</li>
</ul>
<p>Similarly, in the event that the <em>getDigits</em> response from <em>PincodeConference.php</em> is ‘2’, i.e a conference participant, the only change that is made is that the <em>startConfernece.php</em> is called specifying the response is from a conference participant</p>

<pre><code>$response = "{
		\"commands\": [
			{
				\"getDigits\": {
					\"speak\": {
						\"text\": \"Please enter the pin you wish to use for your conference, followed by the hash key\",
						\"voice\": \"Female\"
					},
					\"finishOnKey\": \"#\",
					\"timeout\": \"15\",
					\"retries\": \"2\",
					\"actionUrl\": \"&lt;your-hostname-and-path&gt;/startConference.php?state=participant\"
				}
			},
			{
				\"speak\": {
					\"text\": \"Sorry, you didn't enter the number in time. We can't help you\",
					\"voice\": \"Female\"
				}
			}					]
	}";
	echo ($response);
</code></pre>

<p>Finally in <em>eventHandler.php</em> you validate that the caller has entered a correct value. You can limit the input options that are actually available to callers - see the <a href="../../commandref/getdigits/">getDigits documentation</a>, however in this case we are allowing any single digit to be entered. As a result if the keypad numebr pressed is not 1, or 2:</p>

<pre><code>$response = "{
		\"commands\": [
			{
				\"speak\": {
					\"text\": \"Sorry you entered an incorrect value. Please try again\",
					\"voice\": \"Female\"
				}
			},
			{
				\"redirect\": {
					\"callbackUrl\": \"&lt;your-hostname-and-path&gt;PincodeConference.php\"
					}
			}
		]
	}";
	echo ($response);
</code></pre>

<p>In this case we specify, via a <em>speak</em> command, that the user has entered an invalid value and then use the <em>redirect</em> command to return the user to the start of the call flow, so they can try again.</p>

<p>Finally based on the caller input you can add them to a conference based on the pincode they have entered. Looking at the final file in Quick Start Guide demo code - <em>startConfernece.php</em></p>

<pre><code>switch ($eventName) {
    case "DigitsCollected":
	$digitsCollected = $obj-&gt;{'digits'};

	// if there is a hash in the $digitsCollected then strip it
		$digitsLessHash = str_replace("#", "", $digitsCollected);

		// switch based on state = moderator/participant
	switch ($state) {
		case "moderator":
			$response = "{
				\"commands\": [
					{
				  \"dial\": {
						\"conferenceName\": \"" . $digitsLessHash . "\",
						\"conferenceProperties\": {
							\"startOnEnter\":true
						}
					    }
					}

				]
			}";
			echo ($response);
			break;
		case "participant";
			$response = "{
				\"commands\": [
					{
				  \"dial\": {
						\"conferenceName\": \"" . $digitsLessHash . "\",
						\"conferenceProperties\": {
							\"startOnEnter\":false
						}
					    }
					}

				]
			}";
			echo ($response);
			break;
</code></pre>

<p>In this case:</p>

<ul>
<li>If the URL attribute for <em>‘state’</em>, specified in <em>eventHandler.php</em> is equal to moderator, then the caller is placed into a conference name that equals the pincode that the caller entered.</li>
  <li>The moderator is added to the conference with the additional <em>conferenceProperties - “startOnEnter”:true</em>.  When the moderator enters the conference any previous participants who may have been muted, will be able to hear each other</li>
  <li>
<strong>NOTE:</strong> that as the caller entered a hash (#) to complete their keypad input this has to be removed, prior to using the input as a conferenceName. This is done here:<br><ul>
<li><em>$digitsLessHash = str_replace(“#”, “”, $digitsCollected)</em></li>
    </ul>
</li>
  <li>Any participant is added to the conference with the additional <em>conferenceProperties - “startOnEnter”:false</em>  When a participant enters the conference they will be muted until the moderator joins.</li>
</ul>
<p>That’s it. With a few lines of code you have created a dial in conference service on your BlueVia Voice Number that supports multiple conferences, based on a pin-code access. This demo will allow you to have multiple conferences hosted from the same BlueVia voice Number.</p>

<!-- Bluevia  -->

<!-- Overview -->

<!-- Quick start -->

<!-- Restref -->

<!-- Command ref -->

<!-- Notifications -->

<!-- Error codes  -->

<!-- Roadmap -->

<!-- Play -->

<!-- Known Issues -->

        <hr>
<span id="prevPage" class="bottomLinks pull-left"></span>
        <span id="nextPage" class="bottomLinks pull-right"></span>

      </div>

      <div id="sidebar" class="span3">
        <div class="accordion" id="accordionMenu">
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionOverview" href="#collapseOverview"><i class="icon-chevron-down"></i></a><a href="../../overview/">Overview</a>
            </div>
          <div id="collapseOverview" class="accordion-body collapse">
            <div class="accordion-inner">
              <ul class="js-guides nav nav-list sidemenu">
<li>
                  <a href="../../overview/restapi/">BlueVia Voice RESTful API</a>
                </li>
                <li>
                  <a href="../../overview/callcontrol/">BlueVia Voice Call Control Commands</a>
                </li>
                <li>
                  <a href="../../overview/callflows/">Call Flows</a>
                </li>
                <li>
                  <a href="../../overview/existing/">Existing BlueVia APIs and the BlueVia Voice API</a>
                </li>
                <li>
                  <a href="../../overview/balance/">Adding Balance To Your BlueVia Account</a>
                </li>
                <li>
                  <a href="../../overview/numbers/">Buying Numbers</a>
                </li>
                <li>
                  <a href="../../overview/configure/">Configuring Your BlueVia Numbers</a>
                </li>
                <li>
                  <a href="../../overview/usingnumbers/">Using Your BlueVia Voice Numbers</a>
                </li>
                <li>
                  <a href="../../overview/pricing/">BlueVia Voice API Costs</a>
                </li>
                <li>
                  <a href="../../overview/knownlimitations/">Known Alpha Limitations</a>
                </li>
              </ul>
</div>
          </div>

          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionQuickstart" href="#collapseQuickstart"><i class="icon-chevron-down"></i></a><a href="../">Quick Start Guides</a>
            </div>
          <div id="collapseQuickstart" class="accordion-body collapse">
            <div class="accordion-inner">
              <ul class="nav nav-list">
<li>
                  <a href="../connectcallnocode/">Connect a Call Without Code</a>
                </li>
                <li>
                  <a href="../createconfnocode/">Create a Conference Without Code</a>
                </li>
                <li>
                  <a href="./">A Conference With Pin Code</a>
                </li>
                <li>
                  <a href="../restapicreatecall/">Create A Call With the REST API</a>
                </li>
                <li>
                  <a href="../modifycall/">Modify An Existing Call</a>
                </li>
                <li>
                  <a href="../restapicreateconf/">Create A Conference Call With The REST API</a>
                </li>
                <li>
                  <a href="../restapiupdateconfig/">Update Your Number's Config With The REST API</a>
                </li>

              </ul>
</div>
          </div>
          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionRestRef" href="#collapseRestRef"><i class="icon-chevron-down"></i></a><a href="../../restref/">RESTful API Reference</a>
            </div>
          <div id="collapseRestRef" class="accordion-body collapse">
            <div class="accordion-inner">
              <ul class="nav nav-list">
<li>
                  <a href="../../restref/request/">HTTP Request</a>
                </li>

                <li>
                  <a href="../../restref/resources/">Resources</a>
                  </li>
<li>
                    <ul class="nav nav-list">
<li>
                        <a href="../../restref/accountresources/">Account Management Resources</a>
                      </li>
                      <li>
                        <ul class="nav nav-list">
<li>
                            <a href="../../restref/account/">Account</a>
                          </li>
                          <li>
                            <a href="../../restref/accountnumber/">Account Number</a>
                          </li>
                          <li>
                            <a href="../../restref/accountconfigrulescollection/">Account Config Rules Collection</a>
                          </li>
                        </ul>
</li>
                      <li>
                        <a href="../../restref/availablenumberscollection/">Available Numbers Collection</a>
                      </li>
                      <li>
                        <a href="../../restref/calls/">Calls Resources</a>
                      </li>
                      <li>
                          <ul class="nav nav-list">
<li>
                              <a href="../../restref/callcollection/">Call Collection</a>
                            </li>
                            <li>
                              <a href="../../restref/call/">Call</a>
                            </li>
                            <li>
                              <a href="../../restref/calllegscollection/">Calls Leg Collection</a>
                            </li>
                            <li>
                              <a href="../../restref/callleg/">Call Leg</a>
                            </li>
                            <li>
                              <a href="../../restref/modifycall/">Modify Call - Set Commands</a>
                            </li>
                          </ul>
</li>
                      <li>
                        <a href="../../restref/sms/">SMS Resources</a>
                      </li>
                    </ul>
</li>
                

                <li>
                  <a href="../../restref/callstatuses/">Call Statuses</a>
                </li>
                <li>
                  <a href="../../restref/calllegstatuses/">Call Leg Statuses</a>
                </li>
              </ul>
</div>
          </div>
          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionCommandRef" href="#collapseCommandRef"><i class="icon-chevron-down"></i></a><a href="../../commandref/">Call Control Commands Reference</a>
            </div>
          <div id="collapseCommandRef" class="accordion-body collapse">
            <div class="accordion-inner">
              <ul class="nav nav-list">
<li>
                  <a href="../../commandref/sendingcallcommands/">Providing Call Commands</a>
                </li>
                <li>
                  <a href="../../commandref/dial/">Dial</a>
                </li>
                <li>
                  <ul class="nav nav-list">
<li>
                      <a href="../../commandref/dialnumber/">Dial Number</a>
                    </li>
                    <li>
                      <a href="../../commandref/dialconference/">Dial Conference</a>
                    </li>
                    <li>
                      <a href="../../commandref/dialcallid/">Dial Call Id</a>
                    </li>
                  </ul>
</li>
                <li>
                  <a href="../../commandref/speak/">Speak</a>
                </li>
                <li>
                  <a href="../../commandref/play/">Play</a>
                </li>
                <li>
                  <a href="../../commandref/getdigits/">GetDigits</a>
                </li>
                <li>
                  <a href="../../commandref/hangup/">HangUp</a>
                </li>
                <li>
                  <a href="../../commandref/redirect/">Redirect</a>
                </li>
                <li>
                  <a href="../../commandref/wait/">Wait</a>
                </li>
                <li>
                  <a href="../../commandref/sms/">SMS</a>
                </li>
                <li>
                  <a href="../../commandref/commandchains/">Command Chains</a>
                </li>
              </ul>
</div>
          </div>
          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionNotifications" href="#collapseNotifications"><i class="icon-chevron-down"></i></a><a href="../../notifications/">Notification Events Reference</a>
            </div>
          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionErrorCodes" href="#collapseErrorCodes"><i class="icon-chevron-down"></i></a><a href="../../errorcodes/">Voice and SMS Error Codes</a>
            </div>
          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionRoadmap" href="#collapseRoadmap"><i class="icon-chevron-down"></i></a><a href="../../roadmap/">Roadmap</a>
            </div>
          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle inline" data-toggle="collapse" data-parent="#accordionPlay" href="#collapsePlay"><i class="icon-chevron-down"></i></a><a href="../../play/">Play ...</a>
            </div>
          <div id="collapsePlay" class="accordion-body collapse">
            <div class="accordion-inner">
              <ul class="nav nav-list">
<li>
                  <a href="../../play/">BBC Newsreader</a>
                </li>
                <li>
                  <a href="../../play/panicbutton/">Rasberry Pi Panic Button</a>
                </li>
              </ul>
</div>
          </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- /sidebar-module -->
<div class="page-footer">
  <div id="footer" class="container-fluid">
    <div class="row-fluid">
      <div class="footer_inner clearfix offset1">

        <ul class="footer_nav span2 unstyled">
<h4><a href="http://bluevia.com">Bluevia</a></h4>
          <li>
            <a href="https://bluevia.com/en/page/tour">Tour</a>
          </li>
          <li>
            <a href="http://bluevia.com/ot-www/webroot/index.php/en/page/boilerplate.TermsAndConds">terms and conditions</a>
          </li>
          <li>
            <a href="http://bluevia.com/ot-www/webroot/index.php/en/page/boilerplate.Privacy">privacy policy</a>
          </li>
          <li>
            <a href="http://bluevia.com/ot-www/webroot/index.php/en/page/boilerplate.Accessibility">accesibility</a>
          </li>
        </ul>
<ul class="footer_nav span2 unstyled">
<h4><a href="https://bluevia.com/en/page/tech">Tech Stuff</a></h4>
            <li>
                <a href="https://bluevia.com/en/page/tech.overview">Overview</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/tech.howto">How To</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/tech.APIs">APIs</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/tech.libraries">Libraries</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/tech.bluevialab">BlueVia Lab</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/tech.arduino">Arduino</a>
            </li>
        </ul>
<ul class="footer_nav span2 unstyled">
<h4><a href="https://bluevia.com/en/page/biz">Biz Stuff</a></h4>
            <li>
                <a href="https://bluevia.com/en/page/biz.businessmodels">Business Models</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/biz.digitalgoods">Selling Digital Goods</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/biz.getpaid">Get Paid</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/biz.marketingstuff">Marketing Stuff</a>
            </li>
            <li>
                <a href="https://bluevia.com/en/page/biz.wayra">Wayra</a>
            </li>
        </ul>
<ul class="footer_nav span2 unstyled">
<h4><a href="https://bluevia.com/en/page/inspiration">Inspiration</a></h4>
            <li>
                <a id="menu-case" href="https://bluevia.com/en/page/inspiration.appiversary">Appiversary</a>
            </li>
            <li>
                <a id="menu-case" href="https://bluevia.com/en/page/inspiration.facejam">FaceJam</a>
            </li>
            <li>
                <a id="menu-case" href="https://bluevia.com/en/page/inspiration.facetones">Facetones</a>
            </li>
            <li>
                <a id="menu-case" href="https://bluevia.com/en/page/inspiration.textdeck">Textdeck</a>
            </li>
            <li>
                <a id="menu-case" href="https://bluevia.com/en/page/inspiration">More...</a>
            </li>
        </ul>
<ul class="footer_nav span2 unstyled">
<h4>Support</h4>
          <li>
            <a href="https://bluevia.com/en/page/support">contact us</a>
          </li>
        </ul>
</div>
    </div>
    <div class="row-fluid">

    </div>
    <!-- /.site --> </div>
  <!-- /#footer -->
</div>
<script>

  $(".apidoc li > dl > dt").addClass("span3");
  $(".apidoc dl dl dt").addClass("span4");
  $(".apimethod dt").addClass("span2");
  $(".apimethod dd").addClass("offset1");

  // Highlighting current page in the sidebar menu
  pathname = window.location.pathname;
  $("a[href='./']").parent().addClass("active");
  $("a[href='./']").parents(".collapse").collapse("show");

  pathtitle = $("#sidebar a[href='./']")[0];


  // Previous and next links
  menuLinks = $("#sidebar a").not(".accordion-toggle");
  pageIndex = $(menuLinks).index($(pathtitle));

  prevPageIndex = pageIndex-1;
  if ( $($(menuLinks)[prevPageIndex]).attr("href") == "./" )
    prevPageIndex = prevPageIndex - 1;
  prevPage = $($(menuLinks)[prevPageIndex]).clone();

  nextPageIndex = pageIndex+1;
  if ( $($(menuLinks)[nextPageIndex]).attr("href") == "./" )
    nextPageIndex = nextPageIndex + 1;
  nextPage = $($(menuLinks)[nextPageIndex]).clone();

  $(prevPage).prepend("<< ");
  $(nextPage).append(" >>");

  $("#prevPage").html($(prevPage));
  $("#nextPage").html($(nextPage));

  // Breadcrumbs
  parentGroup = $(pathtitle).parents(".accordion-group");
  parentCategoryText = $(".accordion-heading a:last",parentGroup)[0];
  if(parentCategoryText != null) {
    if($(parentCategoryText).text() != $(pathtitle).text())
      $(".breadcrumb li.active").before('<li><a href="'+$(parentCategoryText).attr("href")+'">'+$(parentCategoryText).text()+'</a> <span class="divider">/</span></li>');
  }
  if (pathtitle != null)
    $(".breadcrumb .active").text(pathtitle.text);

</script>
</body>
</html>
